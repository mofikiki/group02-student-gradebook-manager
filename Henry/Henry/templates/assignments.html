{% extends "layout.html" %}
{% block content %}
<h1>Assignments</h1>

{% if can_edit %}
<section class="form-card">
  <h2>Add New Assignment</h2>
  <form method="post">
    <div class="row">
      <label for="title">Title</label>
      <input id="title" name="title" type="text" placeholder="e.g. Midterm Exam" required />
    </div>
    <div class="row">
      <label for="type">Assignment Type</label>
      <select id="type" name="type" required>
        <option value="exam">Exam</option>
        <option value="quiz">Quiz</option>
        <option value="homework">Homework</option>
      </select>
    </div>
    <div class="row">
      <label for="weight">Weight (default 1.0)</label>
      <input id="weight" name="weight" type="number" step="0.1" min="0.1" value="1.0" />
    </div>
    <div class="row">
      <button type="submit">Add Assignment</button>
    </div>
  </form>
</section>
{% else %}
<div class="viewer-info-card">
  <h2>Assignment Management</h2>
  <p>You are viewing assignments in read-only mode. Switch to Teacher role to add new assignments.</p>
</div>
{% endif %}

<section class="table-card">
  <h2>All Assignments ({{ assignments|length }})</h2>
  {% if assignments %}
  <div class="assignments-grid">
    {% for a in assignments %}
      <div class="assignment-item">
        <div class="assignment-header">
          <span class="assignment-id">#{{ a.id }}</span>
          <span class="assignment-type {{ a.type|default('exam') }}">{{ a.type|default('exam')|title }}</span>
        </div>
        <h3 class="assignment-title">{{ a.title }}</h3>
        <div class="assignment-details">
          <span class="weight">Weight: {{ a.weight }}</span>
        </div>
      </div>
    {% endfor %}
  </div>
  {% else %}
    <div class="empty-state">
      <p>No assignments created yet.</p>
      {% if can_edit %}
        <p><small>Use the form above to add your first assignment.</small></p>
      {% endif %}
    </div>
  {% endif %}
</section>
{% endblock %}